#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –¥–µ–ø–ª–æ—è
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: bash update-and-deploy.sh [backend|frontend|all]

set -e

MODE=${1:-all}

echo "üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –¥–µ–ø–ª–æ–π MiniApp"
echo ""

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
cd "$(dirname "$0")"

# 1. Git pull
echo "üì• –ü–æ–ª—É—á–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ Git..."
git pull
echo "‚úÖ Git –æ–±–Ω–æ–≤–ª—ë–Ω!"
echo ""

# 2. –ó–∞–ø—É—Å–∫–∞–µ–º –¥–µ–ø–ª–æ–π
bash deploy-all.sh $MODE

