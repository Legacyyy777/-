# üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Login Widget

Telegram Login Widget –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ Telegram –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

## –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞ –≤ BotFather

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Telegram** –∏ –Ω–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/botfather)

2. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É** `/setdomain`

3. **–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞**

4. **–í–≤–µ–¥–∏—Ç–µ –¥–æ–º–µ–Ω** –≤–∞—à–µ–≥–æ MiniApp (–Ω–∞–ø—Ä–∏–º–µ—Ä: `testminiapp.legacyyy777.site`)

5. **–ì–æ—Ç–æ–≤–æ!** BotFather –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É

## –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª login.html

–í —Ñ–∞–π–ª–µ `public/login.html` –∑–∞–º–µ–Ω–∏—Ç–µ:

```html
data-telegram-login="YOUR_BOT_USERNAME"
```

–ù–∞:

```html
data-telegram-login="–≤–∞—à_bot_username"
```

*–ù–∞–ø—Ä–∏–º–µ—Ä:* `data-telegram-login="remnawave_bot"`

## –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env

–î–æ–±–∞–≤—å—Ç–µ –≤ `/root/-/backend/.env`:

```bash
# JWT —Å–µ–∫—Ä–µ—Ç (–ª—é–±–∞—è —Å–ª—É—á–∞–π–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)
JWT_SECRET="–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á_–¥–ª—è_jwt"

# –ò–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º - –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω BOT_TOKEN
```

## –®–∞–≥ 4: –î–µ–ø–ª–æ–π

```bash
cd /root/-
bash update-and-deploy.sh
```

## –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://testminiapp.legacyyy777.site/login.html
```

–î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ **"Log in with Telegram"**

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç "Login with Telegram"**
2. **Telegram –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç popup** —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
3. **–ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è** Telegram –ø–µ—Ä–µ–¥–∞—ë—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ –≤–∞—à —Å–∞–π—Ç
4. **Backend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å—å** –æ—Ç Telegram
5. **Backend —Å–æ–∑–¥–∞—ë—Ç JWT —Ç–æ–∫–µ–Ω** –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
6. **–§—Ä–æ–Ω—Ç–µ–Ω–¥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ–∫–µ–Ω** –≤ localStorage
7. **–†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é** —Å—Ç—Ä–∞–Ω–∏—Ü—É miniapp

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚úÖ **–î–∞–Ω–Ω—ã–µ –æ—Ç Telegram –ø–æ–¥–ø–∏—Å–∞–Ω—ã** - –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–¥–¥–µ–ª–∞—Ç—å  
‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏** - –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å—Ç–∞—Ä—à–µ 24 —á–∞—Å–æ–≤  
‚úÖ **JWT —Ç–æ–∫–µ–Ω—ã** —Å –∏—Å—Ç–µ—á–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ 30 –¥–Ω–µ–π  
‚úÖ **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å BOT_TOKEN** –∫–∞–∫ —Å–µ–∫—Ä–µ—Ç–æ–º  

## Troubleshooting

### –ö–Ω–æ–ø–∫–∞ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –¥–æ–º–µ–Ω –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ BotFather
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `data-telegram-login` –≤ login.html

### –û—à–∏–±–∫–∞ "–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `BOT_TOKEN` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤ .env
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend: `docker restart remnawave_miniapp_backend`

### –û—à–∏–±–∫–∞ CORS
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `ALLOWED_ORIGINS` –≤ .env –≤–∫–ª—é—á–∞–µ—Ç –≤–∞—à –¥–æ–º–µ–Ω

